---
description: "Agent Teams で協調作業（Lead: 計画+実装、Reviewer: レビュー）"
---

# Agent Teams - 協調作業モード

以下のタスクを **2人のエージェントチーム** で実行してください：

**タスク**: $1

## チーム構成

### 1. Lead（あなた）
**役割**: タスクの計画立案、実装、コミット

**責任**:
- 要件の理解と調査
- 実装計画の作成
- コードの実装
- テストの実行
- git commit の実行

### 2. Reviewer（チームメイト）
**役割**: 計画と実装のレビュー

**責任**:
- 実装計画のレビュー（アーキテクチャ、セキュリティ、パフォーマンスの観点）
- 実装後のコードレビュー
- 問題点の指摘とフィードバック
- ベストプラクティスの確認

## ワークフロー

### Phase 1: 計画立案とレビュー

1. **Lead**: タスクの調査と実装計画を作成
   - 関連ファイルの特定
   - 実装アプローチの検討
   - 変更の影響範囲の確認

2. **Lead → Reviewer**: 実装計画のレビューを依頼
   ```
   Ask the Reviewer teammate to review the implementation plan
   ```

3. **Reviewer**: 計画をレビュー
   - アーキテクチャの妥当性
   - セキュリティリスクの有無
   - パフォーマンスへの影響
   - 考慮漏れの確認

4. **Lead**: フィードバックを反映して計画を修正

### Phase 2: 実装

5. **Lead**: 承認された計画に従って実装
   - 必要に応じて Skills を活用
   - テストを実行して動作確認

### Phase 3: コードレビュー

6. **Lead → Reviewer**: 実装のレビューを依頼
   ```
   Ask the Reviewer teammate to review the implementation
   ```

7. **Reviewer**: コードレビューを実施
   - セキュリティ脆弱性のチェック
   - パフォーマンス問題のチェック（N+1問題など）
   - コード品質のチェック（可読性、保守性）
   - テストカバレッジの確認
   - ベストプラクティスへの準拠

8. **Lead**: 指摘事項を修正

### Phase 4: コミット

9. **Lead**: 最終確認後、git commit を実行
10. **Reviewer**: コミット内容の最終確認

## Reviewer のレビュー観点

### セキュリティ
- 認証情報のハードコード
- SQLインジェクション、XSS の脆弱性
- 権限チェックの漏れ
- パスワードの平文保存

### パフォーマンス
- N+1 問題
- 非効率なクエリ
- 不要なデータ取得
- キャッシュの未使用

### コード品質
- 命名規則の統一
- 適切な抽象化
- テストの充実度
- ドキュメントの有無

### ベストプラクティス
- Rails 規約（Rails プロジェクトの場合）
- Python PEP 8（Python プロジェクトの場合）
- Ansible 冪等性（Ansible の場合）
- インフラ設定のベストプラクティス

## 重要な注意事項

### Lead（あなた）へ
- Reviewer からのフィードバックを真摯に受け止める
- 不明点は Reviewer に質問する
- 急いで実装せず、計画段階でしっかり検討する

### Reviewer へ
- 建設的なフィードバックを心がける
- 問題点だけでなく、改善案も提示する
- 重大な問題は明確に指摘する
- 良い実装は積極的に評価する

## チームメイトのスポーン

Reviewer チームメイトを以下の役割で作成してください：

**Reviewer の役割**:
- 実装計画のレビュー（アーキテクチャ、セキュリティ、パフォーマンスの観点）
- コードレビュー（セキュリティ脆弱性、パフォーマンス問題、コード品質）
- 具体的な改善提案を含む建設的なフィードバックの提供
- ベストプラクティスへの準拠確認（Rails/Python/Ansible/Infrastructure）

---

**Lead と Reviewer で協力して、高品質な実装を目指しましょう！**
